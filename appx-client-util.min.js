/****************************************************************************/
"use strict"
function hton16(e){return[255&e>>8,255&e>>0]}function hton32(e){return[255&e>>24,255&e>>16,255&e>>8,255&e>>0]}function cleanClassName(e){return e.replace(/[^_0-9a-zA-Z]/g,"_")}function ab2int32(e){return new DataView(new Uint8Array(e).buffer).getUint32(0)}function ab2str(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,new Uint16Array(e))+" "))}function ab3str(e){return decodeURIComponent(escape(String.fromCharCode.apply(" ",new Uint8Array(e))+" <br/>"))}function ab4str(e){for(var r="",a=0;a<e.length;a++)r+=0!=e[a]?String.fromCharCode(e[a]):" "
return r+" "}function buf2str(e){var r,a=""
logactivity("got buffer:  "+JSON.stringify(e))
for(var o=0;o<e.length;o++)r=e.readUInt8(o),a+=0==r?" ":String.fromCharCode(r)
return e=[],decodeURIComponent(escape(a))}function hex2a(e){for(var r="",a=0;a<e.length;a+=2)r+=String.fromCharCode(parseInt(e.substr(a,2),16))
return r}function str2ab(e,r){for(var a=new Uint16Array(r),o=0,n=e.length;o<n;o++)a[o]=e.charCodeAt(o)
return a}function str3ab(e,r){for(var a=new Uint8Array(r),o=0,n=e.length;o<n;o++)a[o]=e.charCodeAt(o)
return a}function str4ab(e){for(var r=new Uint8Array(e.length),a=0,o=e.length;a<o;a++)r[a]=e.charCodeAt(a)
return r}function toUTF8Array(e){for(var r=[],a=0;a<e.length;a++){var o=e.charCodeAt(a)
o<128?r.push(o):o<2048?r.push(192|o>>6,128|63&o):o<55296||o>=57344?r.push(224|o>>12,128|o>>6&63,128|63&o):(a++,o=65536+((1023&o)<<10|1023&e.charCodeAt(a)),r.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return r}function getUnicodeCharacter(e){if(e>=0&&e<=55295||e>=57344&&e<=65535)return String.fromCharCode(e)
if(e>=65536&&e<=1114111){e-=65536
var r=((1047552&e)>>10)+55296,a=(1023&e)+56320
return String.fromCharCode(r)+String.fromCharCode(a)}}function decodeUTF16LE(e){for(var r=[],a=0;a<e.length;a+=2)r.push(e.charCodeAt(a)|e.charCodeAt(a+1)<<8)
return String.fromCharCode.apply(String,r)}function fixedCharCodeAt(e,r){r=r||0
var a,o,n=e.charCodeAt(r)
if(55296<=n&&n<=56319){if(a=n,o=e.charCodeAt(r+1),isNaN(o))throw"High surrogate not followed by low surrogate in fixedCharCodeAt()"
return 1024*(a-55296)+(o-56320)+65536}return!(56320<=n&&n<=57343)&&n}function SortByProperty(e){var r=1
return"-"===e[0]&&(r=-1,e=e.substr(1)),function(a,o){var n=null==a[e]?-1:null==o[e]?1:a[e]<o[e]?-1:a[e]>o[e]?1:0
return n*r}}function numberSort(e,r){return e-r}function appxColorXlate(e,r){try{var a=null
if(null!=e&&e.length>0){var o=e.split("")
if("#"==o[0]&&(7==o.length||9==o.length)){var n=parseInt(e.substring(1,3),16),t=parseInt(e.substring(3,5),16),s=parseInt(e.substring(5,7),16)
a=[n,t,s],r||(r=9==o.length?e.substring(7,9):100)}if(!a){var p=o[0]
if(p>="0"&&p<="9")try{a=colorTable[parseInt(e)-1]}catch(l){a=null,console.log(l.stack)}else e=e.toLowerCase(),"black"==e&&(a=appxColor.black),"blue"==e&&(a=appxColor.blue),"cyan"==e&&(a=appxColor.cyan),"darkGray"==e&&(a=appxColor.darkGray),"gray"==e&&(a=appxColor.gray),"green"==e&&(a=appxColor.green),"lightGray"==e&&(a=appxColor.lightGray),"magenta"==e&&(a=appxColor.magenta),"orange"==e&&(a=appxColor.orange),"pink"==e&&(a=appxColor.pink),"red"==e&&(a=appxColor.red),"white"==e&&(a=appxColor.white),"yellow"==e&&(a=appxColor.yellow)}}return a&&3==a.length||(console.log("CharView.xlateColor("+e+") Can't translaet color.  Using 'orange' instead."),a=appxColor.orange),r?r>1&&(r=Math.round(r)/100):r=1,"rgba("+a[0]+","+a[1]+","+a[2]+","+r+")"}catch(i){console.log("appxXlateColor: "+i),console.log(i.stack)}}function base64ToArrayBuffer(e){for(var r=window.atob(e),a=r.length,o=new Uint8Array(a),n=0;n<a;n++)o[n]=r.charCodeAt(n)
return o.buffer}function arrayBufferToBase64(e){for(var r=new Uint8Array(e),a=0;a<r.byteLength;a++)binary+=String.fromCharCode(r[a])
return window.btoa(binary)}function Str2byteArray(e){for(var r=str4ab(e),a=[],o=0;o<r.length;o++)a.push(r[o])
return a}function StrGetSubstr(e,r,a){var o=e.indexOf(r),n=e.substr(o+r.length),t=n.indexOf(a),s=n.substr(0,t)
return s}function checkBrowser(){var e=navigator.userAgent
return e.indexOf("Edge")!=-1?"Edge":e.indexOf("OPR")!=-1?"Opera":e.indexOf("Chrome")!=-1?"Chrome":e.indexOf("Safari")!=-1?"Safari":e.indexOf("Firefox")!=-1?"Firefox":"IE"}function roundAwayFromZero(e){var r
return r=e<0?Math.floor(e):Math.ceil(e)}function roundTowardsZero(e){var r
return r=e<0?Math.ceil(e):Math.floor(e)}function getCursorPosition(e){for(var r=!1,a=["[type=password]","[type=search]","[type=text]","isindex","textarea"],o=0;o<a.length;o++)if(e.is(a[o])){r=!0
break}return r?document.getElementById(e.attr("id")).selectionStart:-1}function clearAndReset(){appx_session.pendingTables=0,appx_session.pendingResources={},appx_session.pendingResources.length=0
for(name in CKEDITOR.instances)$(".ui-tooltip").remove(),$("textarea").val(""),name.indexOf("stale")===-1&&"unloaded"!==CKEDITOR.instances[name].status&&CKEDITOR.instances[name].destroy(!0),$("textarea").hide()}function callValidateText(){$("input, textarea").on("input",function(){var e=this
setTimeout(function(){validateInputText($(e).val(),$(e).data("unicode"))},0)})}function validateInputText(e,r){try{var a=appx_session.rawEncoding
r&&(a="utf-8")
var o={cmd:"appxCheckCharacterEncoding",args:[e,a],handler:"appxCheckCharacterEncoding",data:null}
appx_session.ws.send(JSON.stringify(o))}catch(n){console.log(n),console.log(n.stack)}}function invalidTableData(){$("td:contains('(???)')").length>0&&alert(appx_session.language.alerts.characterError)}function appxEncodingError(e){alert(appx_session.language.alerts.encodingFrontError+e+appx_session.language.alerts.encodingBackError)}function uploadFileToMongo(e,r,a){var o=appx_session.uploadURL+encodeURI(r.replace(/ /g,"_")),n=new XMLHttpRequest
n.open("POST",o),n.onreadystatechange=function(){4===n.readyState&&201===n.status&&(appxClearStatusMsgText(),appxSetStatusText("File upload to server complete..."),$("#main").unblock(),a&&a())},n.send(e)}function tableToMongo(e,r){getTableFromMongo(e,function(e){var a=e.tableID,o=e.tableHash
if(void 0===appx_session.tablePreferences[a]&&(appx_session.tablePreferences[a]={}),void 0!==a&&void 0!==appx_session.tablePreferences[a]&&appx_session.rowCallback===!1){void 0===appx_session.tablePreferences[a].colMapNames&&(appx_session.tablePreferences[a].colMapNames=[]),appx_session.tablePreferences[a].colModel=e.colModel,appx_session.tablePreferences[a].colMap=e.colMap,appx_session.tablePreferences[a].filters=e.filters,appx_session.tablePreferences[a].lastSortName=e.lastSortName,appx_session.tablePreferences[a].lastSortOrder=e.lastSortOrder,appx_session.tablePreferences[a].virtualScroll=e.virtualScroll
for(var n=0;n<appx_session.tablePreferences[a].colModel.length;n++)appx_session.tablePreferences[a].colMapNames[n]=appx_session.tablePreferences[a].colModel[n].name}void 0===appx_session.gridpropscache[o]&&(appx_session.gridpropscache[o]={}),void 0===appx_session.gridpropscache[o].colMapNames&&(appx_session.gridpropscache[o].colMapNames=[]),appx_session.gridpropscache[o].colModel=e.colModel,appx_session.gridpropscache[o].colMap=e.colMap,appx_session.gridpropscache[o].filters=e.filters,appx_session.gridpropscache[o].lastSortName=e.lastSortName,appx_session.gridpropscache[o].lastSortOrder=e.lastSortOrder,appx_session.gridpropscache[o].selected=e.selected,appx_session.gridpropscache[o].virtualScroll=e.virtualScroll,appx_session.gridpropscache[o].scrollTop=e.scrollTop
for(var n=0;n<appx_session.gridpropscache[o].colModel.length;n++)appx_session.gridpropscache[o].colMapNames[n]=appx_session.gridpropscache[o].colModel[n].name
if(!$.isEmptyObject(appx_session.tablePreferences)&&r){var t=new XMLHttpRequest
t.open("POST",appx_session.userPrefsURL+"preferences"),t.send(JSON.stringify(appx_session.tablePreferences))}appx_session.tableDefaults[a]={}})}function getTableFromMongo(e,r){var a=new XMLHttpRequest
a.open("GET",appx_session.userPrefsURL+"preferences"),a.onload=function(){try{appx_session.tablePreferences=JSON.parse(a.response)}catch(o){console.log(o),appx_session.tablePreferences={}}r(e)},a.send()}function appxUtil_downloadUrl(e){if("IE"===checkBrowser())window.open(e,"_blank")
else{var r=e.replace(/.*[/]/g,""),a=document.createElement("a")
a.href=e,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}APPX.DateFormatter2=function(e,r,a){function o(e){return e<10?"0"+e:e}function n(e,r,a){var o=r.indexOf(a)
return o<0?"--":e.substr(o,2)}var t=r.replace(/y/g,"yy").replace(/yyyy/g,"ccyy"),s=a.replace(/HH/g,"hh").replace(/l/g,"ll"),p=new Date,l=o(p.getHours()),i=o(p.getMinutes()),c=o(p.getSeconds()),d=o(Math.floor(p.getMilliseconds()/10)),u=l+":"+i+":"+c+"."+d,f=""
return f+=n(e,t,"cc"),f+=n(e,t,"yy"),f+=n(e,t,"mm"),f+=n(e,t,"dd"),f+=n(u,s,"hh"),f+=n(u,s,"mm"),f+=n(u,s,"ss"),f+=n(u,s,"ll")}
var appxColor={black:[0,0,0],blue:[0,0,255],cyan:[0,255,255],darkBlue:[107,35,142],darkCyan:[95,159,159],darkGray:[169,169,169],darkGreen:[47,79,47],darkMagenta:[142,35,107],darkRed:[142,35,35],green:[0,255,0],lightGray:[211,211,211],magenta:[255,0,255],orange:[255,165,0],red:[255,0,0],white:[255,255,255],yellow:[255,255,0]},appxColorTable=[appxColor.black,appxColor.blue,appxColor.cyan,appxColor.green,appxColor.magenta,appxColor.red,appxColor.yellow,appxColor.white,appxColor.darkBlue,appxColor.darkCyan,appxColor.darkGreen,appxColor.darkMagenta,appxColor.darkRed,appxColor.darkGray,appxColor.lightGray]
