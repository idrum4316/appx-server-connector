/*********************************************************************
 **
 **   server/appx-client-options.js - Client Option processing
 **
 **   This module contains code to process client options.
 **
 *********************************************************************/
function sortAppxOptions(l){appxSortedOptions={},appxSortedOptionsArray=[],$.each(appx_session.options,function(l,n){"false"==n.prop[PROP_HIDDEN].toString().trim()&&(n.prop[PROP_NAME].toString().indexOf("[")>-1?(appxSortedOptions[n.prop[PROP_SECTION]]={},appxSortedOptions[n.prop[PROP_SECTION]].items=[],appxSortedOptions[n.prop[PROP_SECTION]].header=n):appxSortedOptions[n.prop[PROP_SECTION]]&&appxSortedOptions[n.prop[PROP_SECTION]].items.push(n))}),$.each(appxSortedOptions,function(l,n){appxSortedOptions[l].items.sort(function(l,n){return l.prop[PROP_NAME]<n.prop[PROP_NAME]?-1:l.prop[PROP_NAME]>n.prop[PROP_NAME]?1:0}),appxSortedOptionsArray.push(l)}),appxSortedOptionsArray.sort()
var n=$("<table id='preferences' border-collapse='collapse' border='1' cellspacing='0' cellpadding='10'>")
$(n).append("<thead style='padding: 3px;color: #fff;font-weight: bold;background: #678'><th>Option</th><th>Value</th><th>Default Value</th><th>Description</th></thead>"),$(n).append("<tbody>")
for(var o=0;o<appxSortedOptionsArray.length;o++){var e=appxSortedOptions[appxSortedOptionsArray[o]]
$(n).append("<tr style='padding: 3px; background: #5C90DD; color: #fff; font-weight: bold; font-size: 1.2em'><td>"+e.header.prop[PROP_NAME]+"</td> <td></td><td></td><td></td></tr>")
for(var t=0;t<e.items.length;t++){var p,r=!1
"Constants"!=e.items[t].prop[PROP_SECTION]&&null!=e.items[t].prop[PROP_VALUE]&&e.items[t].prop[PROP_VALUE]!=e.items[t].prop[PROP_DEFAULT]&&(r=!0),p="Constants"==e.items[t].prop[PROP_SECTION]||!e.items[t].prop[PROP_EDIT_AT_RT]&&1!=l||e.items[t].prop[PROP_READONLY]?"<span style='background:"+(r?"#ff0":"#fff")+"'>"+(null==e.items[t].prop[PROP_VALUE]?null==e.items[t].prop[PROP_DEFAULT]?"":e.items[t].prop[PROP_DEFAULT]:e.items[t].prop[PROP_VALUE])+"</span>":"<input style='background:"+(r?"#ff0":"#fff")+"' id='"+e.items[t].prop[PROP_NAME]+"' type='text' value='"+(null==e.items[t].prop[PROP_VALUE]?e.items[t].prop[PROP_DEFAULT]:e.items[t].prop[PROP_VALUE])+"' />",$(n).append("<tr style='padding: 3px;'><td>"+e.items[t].prop[PROP_NAME]+"</td><td class='editable-prop'>"+p+"</td><td>"+(null==e.items[t].prop[PROP_DEFAULT]?"":e.items[t].prop[PROP_DEFAULT])+"</td><td>"+(null==e.items[t].prop[PROP_DESC]?"":e.items[t].prop[PROP_DESC])+"</td></tr>")}}return $(n).append("</tbody>"),$(n)}var appxServerClientVersionStr="6.0.0.20092501",appxServerClientVersionNum=60000.20092501,appxSortedOptions={},appxSortedOptionsArray=[],appxSortedOptionsArrayFinal,PROP_SECTION=0,PROP_NAME=1,PROP_HIDDEN=2,PROP_EDIT_AT_RT=3,PROP_AUTO_SAVE=4,PROP_FORCE_SAVE=5,PROP_EXPAND_STRING=6,PROP_CREATE_PATH=7,PROP_DATATYPE=8,PROP_DATALIST=9,PROP_VALUE=10,PROP_DEFAULT=11,PROP_OLD_NAME=12,PROP_OLD_VALUE=13,PROP_DESC=14,PROP_READONLY=15
appx_session.parseOption=function(l){try{if("string"!=typeof l)return l
if(appx_session.globals.os.indexOf("Win")<0)var n=l
else var n=l.replace("///g","\\")
var o=/\$\([a-zA-Z0-9]+\)/
if(!n)return n
for(;n.match(o);)n=n.replace(o,appx_session.getProp(n.match(o)[0].replace("$","").replace("(","").replace(")","")))}catch(e){console.log("appx_session.parseOption: "+e),console.log(e.stack)}return n},appx_session.getRawProp=function(l){try{if(!appx_session.options||!l)return null
if(appx_session.options[l])return appx_session.options[l].prop[PROP_VALUE]}catch(n){console.log("appx_session.getRawProp: "+n),console.log(n.stack)}},appx_session.getProp=function(l){switch(l){case"host":l="lastHost"
break
case"port":l="lastPort"}try{return appx_session.options&&l?appx_session.options[l]?null==appx_session.options[l].prop[PROP_VALUE]?appx_session.parseOption(appx_session.options[l].prop[PROP_DEFAULT]):appx_session.parseOption(appx_session.options[l].prop[PROP_VALUE]):"now"==l?Date.now():"rndByte"==l?Math.floor(255*Math.random()+1).toString():l:"Options not set."}catch(n){console.log("appx_session.getProp: "+n),console.log(n.stack)}},appx_session.setPropEx=function(l,n,o){if(appx_session.options){if(appx_session.options[l]){var e=null
return e="boolean"===appx_session.options[l].prop[PROP_DATATYPE]?null==n||""==n?null:"true"==n.toLowerCase():n,e==appx_session.options[l].prop[PROP_DEFAULT]?appx_session.options[l].prop[PROP_VALUE]=null:appx_session.options[l].prop[PROP_VALUE]=e,o&&(localStorage.appx_options=JSON.stringify(appx_session.options)),"windowTitle"===l&&$("title").html(appx_session.getProp("windowTitle")),appx_session.options[l].prop[PROP_VALUE]}return"Can't set prop:"+l}return"Options not set."},appx_session.setProp=function(l,n){appx_session.setPropEx(l,n,!0)},appx_session.getDefaultInputFontName=function(){},appx_session.loadOptions=function(){var l,n,o
appx_session.severityText="Some kinda text needed here",appx_session.DEFAULT_LOG_LEVEL=0,appx_session.DEFAULT_NOTIFY_LEVEL=1,appx_session.SCALING_QUALITY_HIGH=10,appx_session.globals.os.indexOf("Win")<0?appx_session.fileseparatorchar="/":appx_session.fileseparatorchar="\\",appx_session.options={}
for(var e=[{prop:["HTML5","[HTML5]",!0,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["HTML5","host",!0,!0,!1,!1,!1,!1,"string",null,null,appx_session.host,null,null,"Current Host, set after user logs in.",!1]},{prop:["HTML5","port",!0,!0,!1,!1,!1,!1,"string",null,null,appx_session.port,null,null,"Current Port, set after user logs in.",!1]},{prop:["HTML5","lastPid",!0,!0,!1,!1,!1,!1,"string",null,null,appx_session.pid,null,null,"Last Process ID, set after user logs in.",!1]},{prop:["Experimental","[Experimental]",!0,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["Experimental","inputByteLengthCheck",!0,!0,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"Test raw byte lengths for data entry fields",!1]},{prop:["Experimental","cacheHtmlImages",!0,!0,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"Implement HTML image cache",!1]},{prop:["Experimental","cacheImagesToMemory",!0,!1,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"Cache resource images to memory?",!1]},{prop:["Experimental","newTypeaheadCode",!0,!0,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"Enable new typeahead test code",!1]},{prop:["Experimental","forceAntiAliasing",!0,!1,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"Force AntiAliasing",!1]},{prop:["Experimental","forceWidgetMovable",!0,!1,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"Force all widgets to be movable",!1]},{prop:["Experimental","convertMultiLine",!0,!1,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"convert Multi-line labels to HTML?",!1]},{prop:["Experimental","showTypeaheadLog",!0,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"Log typeahead messages?",!1]},{prop:["Experimental","showExperimental",!0,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"Show hidden experimental options?",!1]},{prop:["Experimental","cacheImagesInMemory",!0,!1,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"Cache all resource images in memory?",!1]},{prop:["Experimental","autoFillMainWindow",!0,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"If using a scrollpane, fill extra space with main window BG color",!1]},{prop:["Experimental","autoGuiWindowMargins",!0,!0,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"turn on auto-gui window margins",!1]},{prop:["Experimental","hideMenuBorder",!0,!1,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"hide the border line between the menubar and the toolbar",!1]},{prop:["Experimental","addToolbarBorder",!0,!1,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"Add a border to the toolbar window",!1]},{prop:["Experimental","toolbarBorderRaised",!0,!1,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"draw the toolbar border as a raised border",!1]},{prop:["Experimental","timeoutMultiplier",!0,!0,!1,!1,!1,!1,"float",null,null,1,null,null,"Timout multiplier applied to server timeout value",!1]},{prop:["Experimental","clearCache",!0,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"clear .appx cache directory",!1]},{prop:["Experimental","newPulldownMenus",!0,!0,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"New pulldown menu code allows same name in more than one place.",!1]},{prop:["Experimental","loadHyperlinksInPlace",!0,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"Launch hyperlinks into the html viewer widget.",!1]},{prop:["Experimental","newWidgetParser",!0,!0,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"Activate new code for parsing widgets",!1]},{prop:["Experimental","autoGuiParser",!0,!0,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"Activate client autoGui parser",!1]},{prop:["Experimental","newImageEditorTools",!0,!0,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"New Image Editor Tools",!1]},{prop:["Experimental","autoFontScaling",!0,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"Can font size auto adjust as window resizes",!1]},{prop:["Options","[Options]",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["Options","gridVirtualScroll",!1,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Grids use virtual scrolling versus paging",!1]},{prop:["Options","gridFilterToolbar",!1,!0,!0,!1,!1,!1,"boolean",null,null,!1,null,null,"(Not Implemented) - Show grid filter toolbar",!0]},{prop:["Options","gridShowRowNumbers",!0,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Show row numbers on left side of grid",!1]},{prop:["Options","gridShowFooterBar",!0,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Show footer bar on grid",!1]},{prop:["Options","guiInterface",!0,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Turn the GUI Interface On or Off",!1]},{prop:["Options","showOptionNumbers",!1,!0,!0,!0,!1,!1,"boolean",null,null,!1,null,null,"Show numeric option numbers of buttons",!1]},{prop:["Options","autoTabOut",!1,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Tab to next field after current field is filled",!1]},{prop:["Options","autoSelect",!1,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Select text as a field gains focus",!1]},{prop:["Options","dockingScrollbar",!0,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Hide scrollbar unless the mouse is near the scrollbar location",!1]},{prop:["Options","showScrollbar",!1,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Should the scrollbar be visible at all?",!1]},{prop:["Options","toolbarIconSize",!1,!0,!0,!1,!1,!1,"string",l,null,"Medium",null,null,"(Not Implemented) - Toolbar Icon Size",!0]},{prop:["Options","toolbarStyle",!1,!0,!0,!1,!1,!1,"string",n,null,"Both",null,null,"(Not Implemented) - Toolbar Button Style",!0]},{prop:["Options","textReverseEnterKey",!1,!0,!0,!1,!1,!1,"boolean",null,null,!1,null,null,"Pressing ENTER in a Text Field performs a Newline only, Ctrl-Enter triggers button",!1]},{prop:["Options","hidePrefsMenuItem",!1,!1,!0,!1,!1,!1,"boolean",null,null,!1,null,null,"(Not Implemented) - Hide the menu option to edit the preferences.ini file",!0]},{prop:["Options","appxDoubleClick",!0,!0,!0,!1,!1,!1,"boolean",null,null,!1,null,null,"Enable Appx DoubleClick = EnterKey logic",!1]},{prop:["Options","arrowScrollRegion",!1,!0,!0,!1,!1,!1,"boolean",null,null,!1,null,null,"(Not Implemented) - arrow keys will scroll and scrolling area if at top or bottom of region",!0]},{prop:["Options","centerAppx",!1,!1,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"Center APPX horizontally in browser",!1]},{prop:["Options","windowOpacity",!1,!1,!1,!1,!1,!1,"integer",null,null,100,null,null,"(Not Implemented) - Window opacity (0=transparent, 100=fully opaque)",!0]},{prop:["Options","displayNumber",!1,!1,!1,!1,!1,!1,"string",o,null,"1",null,null,"(Not Implemented) - Which workstation display to use for a multi-head PC",!0]},{prop:["Options","drawBlockCursor",!1,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"(Not Implemented) - Draw the block cursor",!0]},{prop:["Options","drawScrollActive",!1,!0,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"(Not Implemented) - Draw the scrolling region record selected",!0]},{prop:["Options","valueChangedTimer",!1,!0,!0,!1,!1,!1,"integer",null,null,500,null,null,"Milliseconds to wait after typing for value changed events to fire",!1]},{prop:["Options","doubleBufferScreen",!0,!1,!0,!1,!1,!1,"boolean",null,null,!0,null,null,"Wait for images to load before showing screens",!1]},{prop:["Options","useTableForScan",!1,!0,!0,!1,!1,!1,"boolean",null,null,!1,null,null,"Use the scan screen with table widget",!1]},{prop:["UIDefaults","[UIDefaults]",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["UIDefaults","showMessageDialogs",!1,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"(Not Implemented) - Show MESSAGE text in a popup dialog",!0]},{prop:["UIDefaults","showWarningDialogs",!1,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"(Not Implemented) - Show WARNING text in a popup dialog",!0]},{prop:["UIDefaults","showErrorDialogs",!1,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"(Not Implemented) - Show ERROR text in a popup dialog",!0]},{prop:["UIDefaults","scanTooltip",!1,!0,!1,!1,!1,!1,"string",null,null,"Click to scan for a value from a lookup file",null,null,"(Not Implemented) - Scan button tooltip",!0]},{prop:["LocalPaths","[LocalPaths]",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["LocalPaths","userHome",!1,!1,!1,!1,!0,!0,"string",null,null,"",null,null,"Local user home directory",!1]},{prop:["LocalPaths","userClientRoot",!1,!1,!1,!1,!0,!0,"string",null,null,"$(userHome)"+appx_session.fileseparatorchar+".appx",null,null,"Appx Client root directory for all local files or a user",!1]},{prop:["LocalPaths","cacheRoot",!1,!1,!1,!1,!0,!0,"string",null,null,"$(userClientRoot)"+appx_session.fileseparatorchar+"cache",null,null,"Cache path root directory for all client cache files",!1]},{prop:["LocalPaths","cachePath",!1,!1,!1,!1,!0,!0,"string",null,null,"$(cacheRoot)"+appx_session.fileseparatorchar+"$(host)"+appx_session.fileseparatorchar+"$(port)",null,null,"Cache path directory for the current session",!1]},{prop:["LocalPaths","dataCachePath",!1,!1,!1,!1,!0,!0,"string",null,null,"$(cachePath)"+appx_session.fileseparatorchar+"Data",null,null,"Data cache path directory for the current session",!1]},{prop:["LocalPaths","printCachePath",!1,!1,!1,!1,!0,!0,"string",null,null,"$(cachePath)"+appx_session.fileseparatorchar+"Print",null,null,"Print cache path directory for the current session",!1]},{prop:["Startup","[Startup]",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["Startup","initialFontSize",!1,!1,!1,!1,!1,!1,"integer",null,null,14,null,null,"Base font size to use on startup",!1]},{prop:["Startup","commandShell",!0,!1,!1,!1,!0,!1,"string",null,null,null,"shell",null,"OS Command Shell for launching files",!1]},{prop:["Startup","mapOptionKey",!1,!0,!1,!1,!1,!1,"integer",null,192,192,"optkey",null,"Key to use for the Option key (` == 192). To change click in text box and press key you wish to use.",!1]},{prop:["Startup","mapTabKey",!1,!0,!1,!1,!1,!1,"integer",null,9,9,"tabkey",null,"Key to use for the Tab key (TAB == 9). To change click in text box and press key you wish to use.",!1]},{prop:["Startup","mapEndKey",!1,!0,!1,!1,!1,!1,"integer",null,27,27,"endkey",null,"Key to use for the End key (ESC == 27). To change click in text box and press key you wish to use.",!1]},{prop:["Startup","remoteHost",!1,!1,!1,!1,!1,!1,"string",null,null,null,"host",null,"(Not Implemented) - Remote login hostname",!0]},{prop:["Startup","remotePort",!1,!1,!1,!1,!1,!1,"integer",null,null,0,"port",null,"(Not Implemented) - Remote connection Appx server port",!0]},{prop:["Startup","remoteUser",!1,!1,!1,!1,!1,!1,"string",null,null,null,"user",null,"(Not Implemented) - Remote login user id",!0]},{prop:["Startup","screenRows",!1,!1,!0,!1,!1,!1,"integer",null,null,35,"rows",null,"Screen grid cell rows",!0]},{prop:["Startup","screenColumns",!1,!1,!0,!1,!1,!1,"integer",null,null,144,"cols",null,"Screen grid cell columns",!0]},{prop:["Startup","showDateScans",!1,!1,!1,!1,!1,!1,"boolean",null,null,!1,"datescan",!0,"(Not Implemented) - Show scan buttons on date fields",!0]},{prop:["Startup","showMenubar",!1,!1,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"(Not Implemented) - Show Menubar on client window",!0]},{prop:["Startup","showStatusbar",!1,!1,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"(Not Implemented) - Show Statusbar on client window",!0]},{prop:["Startup","showToolbar",!1,!1,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"(Not Implemented) - Show Toolbar on client window",!0]},{prop:["Startup","showScanButtons",!1,!1,!1,!1,!1,!1,"boolean",null,null,!0,null,null,"(Not Implemented) - Show Scan Buttons on client window",!0]},{prop:["Startup","windowTitle",!1,!1,!1,!1,!0,!1,"string",null,null,"APPX - $(host):$(port):$(lastPid)","title",null,"(Not Implemented) - Text to show in the window title",!0]},{prop:["Startup","mergeBoxes",!0,!0,!1,!1,!1,!1,"boolean",null,null,!1,null,null,"Merge boxes that touch top and two sides of screen",!1]},{prop:["Startup","widgetFontAdjust",!1,!1,!1,!1,!1,!1,"integer",null,null,0,null,null,"Font scaling adjustment for widgets",!1]},{prop:["Constants","[Constants]",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["Constants","serverConnectorVersionStr",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["Constants","serverConnectorVersionNum",!1,!1,!1,!1,!1,!1,"integer",null,null,null,null,null,"",!1]},{prop:["Constants","clientServerVersionStr",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["Constants","clientServerVersionNum",!1,!1,!1,!1,!1,!1,"integer",null,null,null,null,null,"",!1]},{prop:["Constants","clientPublicVersionStr",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["Constants","clientPublicVersionNum",!1,!1,!1,!1,!1,!1,"integer",null,null,null,null,null,"",!1]},{prop:["Constants","localConnectorVersionStr",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["Constants","localConnectorVersionNum",!1,!1,!1,!1,!1,!1,"integer",null,null,null,null,null,"",!1]},{prop:["LastLogin","[LastLogin]",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"",!1]},{prop:["LastLogin","lastHost",!1,!1,!0,!1,!1,!1,"string",null,null,null,null,null,"Remote login hostname",!0]},{prop:["LastLogin","lastPort",!1,!1,!0,!1,!1,!1,"integer",null,null,8060,null,null,"Remote connection Appx server port",!0]},{prop:["LastLogin","userData",!1,!1,!1,!1,!1,!1,"string",null,null,null,null,null,"User Data to pass to server",!0]},{prop:["LastLogin","lastPassword",!0,!1,!1,!1,!0,!1,"string",null,null,null,null,null,"Remote login password",!1]},{prop:["LastLogin","lastPid",!1,!1,!0,!1,!1,!1,"string",null,null,null,null,null,"Last server side process id",!1]}],t=0;t<e.length;t++)appx_session.options[e[t].prop[PROP_NAME]]=e[t]
if(localStorage.appx_options){var p=JSON.parse(localStorage.appx_options)
for(var r in p){"Constants"==p[r].prop[PROP_SECTION]&&(p[r].prop[PROP_VALUE]=null)
for(var s in appx_session.options)appx_session.options[s].prop[PROP_NAME]==p[r].prop[PROP_NAME]&&(appx_session.options[s].prop[PROP_VALUE]=p[r].prop[PROP_VALUE])}}localStorage.appx_options=JSON.stringify(appx_session.options)},appx_session.clearCache=function(){localStorage.clear(),localStorage.appx_ls_version="1",window.location.reload()},appx_session.showPreferences=function(l){var n=$("<div id='appx_prefs'>").css({background:"rgba(50, 50, 50, 0.7)",width:"100%",height:"100%","min-height":"400px","z-index":1e7,display:"none",position:"absolute",top:"0px",left:"0px","font-family":"verdana","font-size":"11px"}).appendTo("body")
l&&n.on("keydown",function(l){sendkey(l)})
var o=$("<div style='border: 10px solid #333;'>").css({width:"950px",height:"430px",background:"#fff"}).appendTo("#appx_prefs").position({my:"center",at:"center",of:window}).draggable(),e=$("<div>").css({width:"950px",height:"400px",overflow:"scroll"}),t=$("<button type='button' style='float:right;border:none;;background: #333;text-align:right;padding: 5px;color: #F5F539; font-weight:bold;padding-bottom: 10px;'>").append($("<span>"+appx_session.language.buttons.closeX+"</span>")).click(function(){$("#appx_prefs").hide(),$("#appx_prefs").remove()}),p=sortAppxOptions(l)
$(o).prepend($("<div>").append(t)),$(e).append($("<div>").append(p)),$(e).appendTo(o),$("#appx_prefs").show(),$(p).find("input").change(function(){appx_session.setProp($(this).attr("id"),$(this).val()),null!=appx_session.getRawProp($(this).attr("id"))?$(this).css({background:"#ff0"}):$(this).css({background:"#fff"})})},appx_session.loadOptions(),appx_session.setProp("clientServerVersionStr",appxServerClientVersionStr),appx_session.setProp("clientServerVersionNum",appxServerClientVersionNum),appx_session.setProp("serverConnectorVersionStr",appx_session.serverConnectorVersionStr),appx_session.setProp("serverConnectorVersionNum",appx_session.serverConnectorVersionNum),appx_session.setProp("screenColumns",appx_session.screencols.toString())
var tempSR=appx_session.screenrows-3
appx_session.setProp("screenRows",tempSR.toString()),$("#client_version").text(appxServerClientVersionStr),$("#appx_access").prop("title",appx_session.language.tooltips.clientVersion+appxServerClientVersionStr)
try{"true"===appxLocalRequired&&(localos_session=new LOCALOS)}catch(ex){console.log("LOCALOS: "+ex.message),console.log(ex.stack)}appxLoginAutoConnect&&setTimeout(function(){start_session()},1e3)
